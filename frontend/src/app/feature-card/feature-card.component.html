<div class="feature-card-container" [class.full-screen]="isFullScreen">
  <h2 mat-dialog-title *ngIf="featureData">Feature Card of {{featureData.Feature_Name}}</h2>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <mat-dialog-content *ngIf="featureData">
      <h3>{{ featureData.Feature_Name }}</h3>
      <p><strong>Description:</strong> {{ featureData.Feature_Description || 'No description available.' }}</p>

    <h3>Descriptive Statistics</h3>
    <div class="table-container" [class.transposed]="isFullScreen">
      <table class="descriptive-stats-table">
        <ng-container *ngIf="!isFullScreen">
          <tr *ngFor="let stat of getStats()">
            <th>{{stat}}</th>
            <td>{{getStatValue(stat)}}</td>
          </tr>
        </ng-container>
        <ng-container *ngIf="isFullScreen">
          <tr>
            <th *ngFor="let stat of getStats()">{{stat}}</th>
          </tr>
          <tr>
            <td *ngFor="let stat of getStats()">{{getStatValue(stat)}}</td>
          </tr>
        </ng-container>
      </table>
    </div>

    <h3>Distribution</h3>
    <div id="visualization" [style.width]="'100%'" [style.height]="isFullScreen ? '70vh' : '400px'"></div>
    <ng-container *ngIf="!isBrowser">
        Visualization is not available during server-side rendering.
    </ng-container>
    <mat-checkbox [(ngModel)]="usePercentageYAxis" (change)="createVisualization()">
      Percentage Y-axis
    </mat-checkbox>
    <mat-checkbox [(ngModel)]="outlierCleaningEnabled" (change)="createVisualization()">
      Outlier Cleaning
    </mat-checkbox>
    <mat-checkbox [(ngModel)]="sparsityCleaningEnabled" (change)="createVisualization()">
      Sparsity Cleaning
    </mat-checkbox>
    <mat-checkbox [(ngModel)]="stackedWrtTarget" (change)="createVisualization()">
      Stacked wrt Target
    </mat-checkbox>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="toggleFullScreen()">{{ isFullScreen ? 'Exit Full-Screen' : 'Full-Screen' }}</button>
    <button mat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>
</div>