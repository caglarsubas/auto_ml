<div class="feature-card-container" [class.full-screen]="isFullScreen">
  <h2 mat-dialog-title> <strong>Feature Card</strong></h2>

  <div *ngIf="errorMessage" class="error-message"> {{ errorMessage }} </div>

  <h3 *ngIf="featureData"> {{ featureData.Feature_Name }}</h3>
  <p *ngIf="featureData"><strong>Description:</strong> {{ featureData.Feature_Description || 'No description available.' }}</p>

  <mat-dialog-content *ngIf="featureData">
    <h3>Descriptive Statistics</h3>
    <div class="table-container" [class.transposed]="isFullScreen">
      <table class="descriptive-stats-table">
        <ng-container *ngIf="!isFullScreen">
          <tr *ngFor="let stat of getStats()">
            <th>{{stat}}</th>
            <td>{{getStatValue(stat)}}</td>
          </tr>
        </ng-container>
        <ng-container *ngIf="isFullScreen">
          <tr>
            <th *ngFor="let stat of getStats()">{{stat}}</th>
          </tr>
          <tr>
            <td *ngFor="let stat of getStats()">{{getStatValue(stat)}}</td>
          </tr>
        </ng-container>
      </table>
    </div>

    <h3>Distribution</h3>
    <!-- <div id="visualization" [style.width]="'100%'" [style.height]="isFullScreen ? '70vh' : '400px'"></div> -->
    <div id="visualization" [style.width.px]="isFullScreen ? null : originalPlotSize.width" [style.height.px]="isFullScreen ? null : originalPlotSize.height"></div>
    
    <div class="checkbox-container">
      
      <div>
        <mat-checkbox [(ngModel)]="usePercentageYAxis" (change)="createVisualization()">
          Percentage Y-axis
        </mat-checkbox>
      </div>

      <div 
      [matTooltip]="getSparsityCleaningTooltip()" [matTooltipPosition]="tooltipPosition">
        <mat-checkbox [(ngModel)]="outlierCleaningEnabled" (change)="createVisualization()" [disabled]="isCategorical">
          Outlier Cleaning
        </mat-checkbox>
      </div>
      
      <div [matTooltip]="getSparsityCleaningTooltip()" [matTooltipPosition]="tooltipPosition">
        <mat-checkbox [(ngModel)]="sparsityCleaningEnabled" (change)="createVisualization()" [disabled]="isCategorical">
          Sparsity Cleaning
        </mat-checkbox>
      </div>
      
      <div>
        <mat-checkbox [(ngModel)]="stackedWrtTarget" (change)="createVisualization()">
          Stacked wrt Target
        </mat-checkbox>
      </div>
    
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="toggleFullScreen()">{{ isFullScreen ? 'Exit Full-Screen' : 'Full-Screen' }}</button>
    <button mat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>

</div>
